{"version":3,"sources":["all.js"],"names":["regionSearch","document","querySelector","scenicList","searchBtn","init","region","str","forEach","item","innerHTML","addEventListener","e","render","axios","get","headers","getAuthorizationHeader","then","response","data","Picture","PictureUrl1","PictureDescription1","Name","Address","OpenTime","TicketInfo","error","console","log","AppID","AppKey","GMTString","Date","toGMTString","ShaObj","jsSHA","setHMACKey","update","HMAC","getHMAC","Authorization"],"mappings":";;AAAA,IAAMA,YAAY,GAAGC,QAAQ,CAACC,aAAT,CAAuB,eAAvB,CAArB;AACA,IAAMC,UAAU,GAAGF,QAAQ,CAACC,aAAT,CAAuB,aAAvB,CAAnB;AACA,IAAME,SAAS,GAAGH,QAAQ,CAACC,aAAT,CAAuB,YAAvB,CAAlB;;AAEA,SAASG,IAAT,GAAgB;AACb,MAAIC,MAAM,GAAG,CAAC,KAAD,EAAO,KAAP,EAAa,KAAb,EAAmB,KAAnB,EAAyB,KAAzB,EAA+B,KAA/B,EAAqC,KAArC,EAA2C,KAA3C,EAAiD,KAAjD,EAAuD,KAAvD,EAA6D,KAA7D,EAAmE,KAAnE,EAAyE,KAAzE,EAA+E,KAA/E,EAAqF,KAArF,EAA2F,KAA3F,EAAiG,KAAjG,EAAuG,KAAvG,EAA6G,KAA7G,EAAmH,KAAnH,EAAyH,KAAzH,EAA+H,KAA/H,CAAb;AACA,MAAIC,GAAG,uKAAP;AAEAD,EAAAA,MAAM,CAACE,OAAP,CAAe,UAASC,IAAT,EAAe;AAC5BF,IAAAA,GAAG,8BAAsBE,IAAtB,uCAAoDA,IAApD,cAAH;AACD,GAFD;AAIDT,EAAAA,YAAY,CAACU,SAAb,GAAyBH,GAAzB;AACD;;AACDF,IAAI,G,CAGJ;;AACAD,SAAS,CAACO,gBAAV,CAA2B,OAA3B,EAAoC,UAAUC,CAAV,EAAa;AAC9CC,EAAAA,MAAM;AACP,CAFF;;AAIA,SAASA,MAAT,GAAkB;AAClBC,EAAAA,KAAK,CAACC,GAAN,CACG,+HADH,EAEG;AACGC,IAAAA,OAAO,EAAEC,sBAAsB;AADlC,GAFH,EAMGC,IANH,CAMQ,UAAUC,QAAV,EAAoB;AAC5B;AACM,QAAMC,IAAI,GAAGD,QAAQ,CAACC,IAAtB;AACA,QAAIb,GAAG,GAAG,EAAV;AACAa,IAAAA,IAAI,CAACZ,OAAL,CAAa,UAASC,IAAT,EAAc;AACxBF,MAAAA,GAAG,2HAEkBE,IAAI,CAACY,OAAL,CAAaC,WAF/B,sBAEoDb,IAAI,CAACY,OAAL,CAAaE,mBAFjE,8IAK+Bd,IAAI,CAACe,IALpC,kLAQcf,IAAI,CAACgB,OARnB,wMAYchB,IAAI,CAACiB,QAZnB,sMAgBcjB,IAAI,CAACkB,UAhBnB,0EAAH;AAoBF,KArBD;AAsBHxB,IAAAA,UAAU,CAACO,SAAX,GAAuBH,GAAvB;AACC,GAjCJ,WAkCU,UAAUqB,KAAV,EAAiB;AACxBC,IAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACC,GApCJ;AAqCC,C,CAUD;;;AACA,SAASX,sBAAT,GAAkC;AAClC;AACG,MAAIc,KAAK,GAAG,kCAAZ;AACA,MAAIC,MAAM,GAAG,6BAAb,CAH+B,CAIlC;;AACG,MAAIC,SAAS,GAAG,IAAIC,IAAJ,GAAWC,WAAX,EAAhB;AACA,MAAIC,MAAM,GAAG,IAAIC,KAAJ,CAAU,OAAV,EAAmB,MAAnB,CAAb;AACAD,EAAAA,MAAM,CAACE,UAAP,CAAkBN,MAAlB,EAA0B,MAA1B;AACAI,EAAAA,MAAM,CAACG,MAAP,CAAc,aAAaN,SAA3B;AACA,MAAIO,IAAI,GAAGJ,MAAM,CAACK,OAAP,CAAe,KAAf,CAAX;AACA,MAAIC,aAAa,GAAG,qBAAqBX,KAArB,GAA6B,+DAA7B,GAA+FS,IAA/F,GAAsG,IAA1H;AACA,SAAO;AAAE,qBAAiBE,aAAnB;AAAkC,cAAUT;AAA5C,GAAP;AACF","file":"all.js","sourcesContent":["const regionSearch = document.querySelector('.regionSearch');\nconst scenicList = document.querySelector('.scenicList');\nconst searchBtn = document.querySelector('.searchBtn');\n\nfunction init() {\n   let region = ['基隆市','台北市','新北市','桃園市','新竹市','新竹縣','宜蘭縣','苗栗縣','臺中市','彰化縣','南投縣','雲林縣','嘉義市','嘉義縣','臺南市','高雄市','屏東縣','臺東縣','花蓮縣','金門縣','連江縣','澎湖縣'];\n   let str = `<option value=\"地區搜尋\" disabled selected hidden>請選擇縣市</option>\n <option value=\"\">全部地區</option>`;\n   region.forEach(function(item) {\n     str += `<option value=\"${item}\" class=\"regionOption\">${item}</option>`\n   })\n                  \n  regionSearch.innerHTML = str;\n}\ninit();\n\n\n// 渲染\nsearchBtn.addEventListener('click', function (e) {\n   render();\n });\n \nfunction render() {\naxios.get(\n   'https://ptx.transportdata.tw/MOTC/v2/Tourism/ScenicSpot?$select=Name%2CAddress%2COpenTime%2CTicketInfo%2CPicture&$format=JSON',\n   {\n      headers: getAuthorizationHeader()\n   }\n)\n  .then(function (response) {\n// document.querySelector('body').textContent=JSON.stringify(response.data);\n      const data = response.data;\n      let str = '';\n      data.forEach(function(item){\n         str += `<li class=\"d-flex py-2 border-bottom\">\n               <div class=\"me-ml\">\n                  <img src=\"${item.Picture.PictureUrl1}\" alt=\"${item.Picture.PictureDescription1}\" class=\"rounded-2 h-6.125 w-6.125\">\n               </div>\n               <div>\n                  <h2 class=\"fs-3 mb-xs\">${item.Name}</h2>\n                  <div class=\"mb-xs fs-2 d-flex\">\n                     <span class=\"material-icons-outlined\">location_on</span>\n                     <p>${item.Address}</p>\n                  </div>\n                  <div class=\"mb-xs fs-2 d-flex\">\n                     <span class=\"material-icons-outlined\">schedule</span>\n                     <p>${item.OpenTime}</p>\n                  </div>\n                  <div class=\"fs-2 d-flex\">\n                     <span class=\"material-icons-outlined\">attach_money</span>\n                     <p>${item.TicketInfo}</p>\n                  </div>\n               </div>\n         </li>`\n      })\n   scenicList.innerHTML = str;\n   })\n   .catch(function (error) {\n   console.log(error);\n   }); \n}\n\n\n\n\n\n\n\n\n\n// API 帶 header 驗證\nfunction getAuthorizationHeader() {\n//  填入自己 ID、KEY 開始\n   let AppID = 'e1aa6d263b8549b796b5299c1eae6f21';\n   let AppKey = 'KyNX20FckXfQPQ16kYeVMP4jJMQ';\n//  填入自己 ID、KEY 結束\n   let GMTString = new Date().toGMTString();\n   let ShaObj = new jsSHA('SHA-1', 'TEXT');\n   ShaObj.setHMACKey(AppKey, 'TEXT');\n   ShaObj.update('x-date: ' + GMTString);\n   let HMAC = ShaObj.getHMAC('B64');\n   let Authorization = 'hmac username=\\\"' + AppID + '\\\", algorithm=\\\"hmac-sha1\\\", headers=\\\"x-date\\\", signature=\\\"' + HMAC + '\\\"';\n   return { 'Authorization': Authorization, 'X-Date': GMTString }; \n}"]}